<div class="mb-8">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold text-smoke-100">Usuarios Registrados</h2>
      <div class="text-sm text-smoke-400">
        Total: {{usuarios()?.data?.length}} usuarios
      </div>
    </div>
  
    <!-- Container con scroll suave y barra personalizada -->
    <div class="relative rounded-lg shadow-lg bg-smoke-950/50 backdrop-blur-sm">
      <div class="overflow-x-auto ">
        <table class="w-full"> <!-- Ancho mínimo para evitar compresión -->
          <thead>
            <tr class="bg-smoke-900/80">
              <th scope="col" class="px-6 py-4 text-left text-xs md:text-sm font-semibold text-smoke-100 whitespace-nowrap">
                ID
              </th>
              <th scope="col" class="px-6 py-4 text-left text-xs md:text-sm font-semibold text-smoke-100 whitespace-nowrap">
                Nombre Comercial
              </th>
              <th scope="col" class="px-6 py-4 text-left text-xs md:text-sm font-semibold text-smoke-100 whitespace-nowrap hidden sm:table-cell">
                Teléfono
              </th>
              <th scope="col" class="px-6 py-4 text-left text-xs md:text-sm font-semibold text-smoke-100 whitespace-nowrap hidden md:table-cell">
                Cédula
              </th>
              <th scope="col" class="px-6 py-4 text-left text-xs md:text-sm font-semibold text-smoke-100 whitespace-nowrap">
                Rol
              </th>
              <th scope="col" class="px-6 py-4 text-left text-xs md:text-sm font-semibold text-smoke-100 whitespace-nowrap">
                Estado
              </th>
            </tr>
          </thead>
          <tbody class="divide-y divide-smoke-800/50">
            @for (datos of usuarios()?.data; track datos.id) {
              <tr class="hover:bg-smoke-900/50 transition-all duration-200 group">
                <td class="px-6 py-4 text-xs md:text-sm font-medium text-smoke-300">
                  #{{datos.id?.toString()?.padStart(4, '0')}}
                </td>
                
                <td class="px-6 py-4 text-xs md:text-sm">
                  <div class="flex items-center space-x-3">
                    <div class="h-8 w-8 rounded-full bg-peel-950 flex items-center justify-center ring-1 ring-peel-900 group-hover:ring-peel-500">
                      <span class="text-peel-300 text-sm font-bold">{{getInitials(datos)()}}</span>
                    </div>
                    <span class="text-smoke-200 font-medium">{{datos.nombreComercial}}</span>
                  </div>
                </td>
                
                <td class="px-6 py-4 text-xs md:text-sm hidden sm:table-cell">
                  <div [class]="datos.telefono == null ? 'text-smoke-500 italic' : 'text-smoke-300'">
                    <div class="flex items-center space-x-2">
                      <svg xmlns="http://www.w3.org/2000/svg" 
                           class="h-4 w-4" 
                           fill="none" 
                           viewBox="0 0 24 24" 
                           stroke="currentColor">
                        <path stroke-linecap="round" 
                              stroke-linejoin="round" 
                              stroke-width="2" 
                              d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                      </svg>
                      <span>{{datos.telefono || 'No registrado'}}</span>
                    </div>
                  </div>
                </td>
                
                <td class="px-6 py-4 text-xs md:text-sm hidden md:table-cell">
                  <div [class]="datos.cedula == null ? 'text-smoke-500 italic' : 'text-smoke-300'">
                    <div class="flex items-center space-x-2">
                      <svg xmlns="http://www.w3.org/2000/svg" 
                           class="h-4 w-4" 
                           fill="none" 
                           viewBox="0 0 24 24" 
                           stroke="currentColor">
                        <path stroke-linecap="round" 
                              stroke-linejoin="round" 
                              stroke-width="2" 
                              d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
                      </svg>
                      <span>{{datos.cedula || 'No registrado'}}</span>
                    </div>
                  </div>
                </td>
                
                <td class="px-6 py-4 text-xs md:text-sm">
                  <span class="px-2.5 py-1 rounded-md bg-peel-950/50 text-peel-300 font-medium text-xs">
                    {{datos.rol.nombre}}
                  </span>
                </td>
                
                <td class="px-6 py-4 text-xs md:text-sm">
                  <span [class]="'px-3 py-1 rounded-full text-xs font-medium inline-flex items-center space-x-1 ' + 
                                (datos.estado 
                                  ? 'bg-green-950/50 text-green-400' 
                                  : 'bg-red-950/50 text-red-400')">
                    <span class="h-1.5 w-1.5 rounded-full"
                          [class]="datos.estado ? 'bg-green-400' : 'bg-red-400'"></span>
                    <span>{{datos.estado ? 'Activo' : 'Inactivo'}}</span>
                  </span>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>